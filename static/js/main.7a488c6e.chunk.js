(this["webpackJsonpsnake-game-react-js"]=this["webpackJsonpsnake-game-react-js"]||[]).push([[0],{22:function(e,t,n){"use strict";n.r(t);var i,a=n(0),o=n.n(a),r=n(10),c=n.n(r),s=n(2),u=n(5),l={gameResolution:{width:500,height:450,squareArea:12.5},speed:{initial:300,minSpeed:100,speedDecay:25}};!function(e){e[e.TOP=1]="TOP",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT"}(i||(i={}));var j,f,b,d,O=i,h=function(){for(var e=l.gameResolution,t=e.height,n=e.width,i=e.squareArea,a=Math.floor(Math.floor(t/i)/2)*i,o=Math.floor(Math.floor(n/i)/2)*i,r=[],c=0;c<3;c++)r.push({top:a,left:o+i*c});return r},p=l.gameResolution,v=p.width,x=p.height,g=p.squareArea,m=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},T=function(){var e=m(0,v/g)*g,t=m(0,x/g)*g;return e==v&&(e-=g),t==x&&(t-=g),{left:e,top:t}},k=n(1),w={state:{fruit:T(),pontuation:0,moveDirection:O.RIGHT,snake:h()},setState:function(){},start:function(){},changeDirection:function(e){},isGameOver:!1},y=Object(a.createContext)(w),R=function(e){var t=e.children,n=Object(a.useState)(w.state),i=Object(u.a)(n,2),o=i[0],r=i[1],c=Object(a.useState)(),j=Object(u.a)(c,2),f=j[0],b=j[1],d=Object(a.useState)(!1),p=Object(u.a)(d,2),v=p[0],x=p[1],g=Object(a.useState)(l.speed.initial),m=Object(u.a)(g,2),R=m[0],D=m[1],G=function(){x(!1),r(Object(s.a)(Object(s.a)({},o),{},{isGameOver:!0})),void 0!=f&&clearInterval(f)},M=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=o.snake,n=l.gameResolution.squareArea,i=t[t.length-1];switch(o.moveDirection){case O.RIGHT:e&&t.shift(),t.push({top:i.top,left:i.left+n});break;case O.LEFT:e&&t.shift(),t.push({top:i.top,left:i.left-n});break;case O.TOP:e&&t.shift(),t.push({top:i.top-n,left:i.left});break;case O.BOTTOM:e&&t.shift(),t.push({top:i.top+n,left:i.left})}r(Object(s.a)(Object(s.a)({},o),{},{snake:t}))},I=function(){!function(){var e=o.snake[o.snake.length-1],t=l.gameResolution,n=t.width,i=t.height,a=t.squareArea;e&&((e.left<0||e.left>n-a)&&G(),(e.top<0||e.top>i-a)&&G())}(),function(){var e=o.snake[o.snake.length-1];if(e){var t=e.left,n=e.top;o.snake.filter((function(e){return e.left==t&&e.top==n})).length>1&&G()}}()},A=function(){M(!1),S(),r(Object(s.a)(Object(s.a)({},o),{},{fruit:T(),pontuation:o.pontuation+1}))},S=function(){var e=l.speed,t=e.minSpeed,n=e.speedDecay;R>t&&D(R-n)};return Object(a.useEffect)((function(){if(v){void 0!=f&&clearInterval(f),M();var e=setInterval((function(){return M()}),R);b(e)}}),[o.moveDirection,v,o.fruit]),Object(a.useEffect)((function(){I(),function(){var e=o.snake[o.snake.length-1];e.top==o.fruit.top&&e.left==o.fruit.left&&A()}()}),[JSON.stringify(o.snake)]),Object(k.jsx)(y.Provider,{value:{state:o,setState:r,start:function(){console.log("new game"),void 0!=f&&clearInterval(f),r(Object(s.a)(Object(s.a)({},o),{},{fruit:T(),snake:h(),pontuation:0,isGameOver:!1})),D(l.speed.initial),x(!0)},changeDirection:function(e){o.moveDirection==O.RIGHT&&e==O.LEFT||o.moveDirection==O.LEFT&&e==O.RIGHT||o.moveDirection==O.TOP&&e==O.BOTTOM||o.moveDirection==O.BOTTOM&&e==O.TOP||r(Object(s.a)(Object(s.a)({},o),{},{moveDirection:e}))}},children:t})},D=y,G=function(e){var t=e.children;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(R,{children:t}),";"]})},M=n(3),I=n(4),A=I.a.div(j||(j=Object(M.a)(["\n    overflow: hidden;\n    display: flex;\n    position: relative;\n"]))),S=I.a.div(f||(f=Object(M.a)(["\n    background: #000;\n    top: 0px;\n    left: 0px;\n    box-sizing: border-box;\n    position: absolute;\n"]))),E=l.gameResolution.squareArea,P=function(e){var t=e.style;return Object(k.jsx)(S,{style:Object(s.a)(Object(s.a)({},t),{},{width:E,height:E})})},F=function(){var e=Object(a.useContext)(D).state.fruit,t=e.top,n=e.left;return Object(k.jsx)(P,{style:{top:t,left:n,background:"#b12603eb"}})},C=function(){var e=Object(a.useContext)(D).state;return Object(k.jsx)(k.Fragment,{children:e.snake.map((function(e,t){var n=e.top,i=e.left;return Object(k.jsx)(P,{style:{top:n,left:i,border:"1px solid #ddd"}},"snake_"+t)}))})},B=l.gameResolution,H=B.width,L=B.height,N=function(){return Object(k.jsxs)(A,{style:{width:H,height:L},children:[Object(k.jsx)(F,{}),Object(k.jsx)(C,{})]})},q=function(){var e=Object(a.useContext)(D).start;return Object(k.jsx)("button",{style:{fontFamily:"'Press Start 2P', cursive"},className:"nes-btn is-primary",onClick:e,children:"New Game"})},J=function(){var e=Object(a.useContext)(D).state;return Object(k.jsxs)("div",{children:["Pontuation: ",e.pontuation]})},z=I.a.div(b||(b=Object(M.a)(["\n    border-bottom: 4px solid #000;\n    width: 100%;\n    padding: 20px;\n    box-sizing: border-box;\n    \n    h1 {\n        margin: 0;\n        padding: 0;\n    }\n\n    div {\n        display: flex;\n        justify-content: space-between;\n    }\n"]))),K=function(){return Object(k.jsxs)(z,{children:[Object(k.jsx)("h1",{className:"title",children:"Snake Game"}),Object(k.jsxs)("div",{children:[Object(k.jsx)(q,{}),Object(k.jsx)(J,{})]})]})},U=I.a.div(d||(d=Object(M.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    margin: 0 auto;\n    /* border: 1px solid #000; */\n    padding: 0;\n    &:focus {\n        outline: none;\n    }\n"]))),V=function(){var e=Object(a.useContext)(D).state;return Object(k.jsx)("dialog",{className:"nes-dialog is-dark",id:"dialog-dark",open:e.isGameOver,children:Object(k.jsxs)("form",{style:{textAlign:"center"},method:"dialog",children:[Object(k.jsx)("p",{className:"title",children:"GAME OVER"}),Object(k.jsxs)("p",{children:["Your pontuation: ",e.pontuation]}),Object(k.jsx)(q,{})]})})},Y=l.gameResolution,_=Y.width,Q=(Y.height,function(){var e=Object(a.useContext)(D).changeDirection;return Object(k.jsxs)(U,{className:"nes-container with-title",role:"button",tabIndex:0,onKeyUp:function(t){switch(t.code){case"ArrowDown":e(O.BOTTOM);break;case"ArrowUp":e(O.TOP);break;case"ArrowRight":e(O.RIGHT);break;case"ArrowLeft":e(O.LEFT)}},onKeyDown:function(){},style:{width:_},children:[Object(k.jsx)(K,{}),Object(k.jsx)(N,{}),Object(k.jsx)(V,{})]})});var W=function(){return Object(k.jsx)(G,{children:Object(k.jsx)(Q,{})})};n(21);c.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(W,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.7a488c6e.chunk.js.map